sudo: false
language: node_js
node_js:
  - node
cache:
  yarn: true
  directories:
  - node_modules
  - "$HOME/.yarn-cache"
install:
- npm install
- npm rebuild node-sass
script:
- npm run lint
- npm run build-dev
- npm run test
deploy:
  - provider: script
    skip_cleanup: true
    script: .travis/pu.sh
    on:
      repo: emgage/engage-ui
      branch: Feature/36462-npm-deployment
      tags: false
  - provider: npm
    email: "$NPM_EMAIL"
    api_key: "$NPM_TOKEN"
    on:
      repo: emgage/engage-ui
      branch: Feature/36462-npm-deployment
      tags: false
